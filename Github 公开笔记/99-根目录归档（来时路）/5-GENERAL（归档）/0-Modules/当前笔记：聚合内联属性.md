---
笔记内容:
  - 低级
---
```dataviewjs
// 获取当前笔记内容
const currentFile = dv.current().file;
const content = await dv.io.load(currentFile.path);
const lines = content.split('\n');

const allNotes = [];

// 提取当前笔记中的所有聚合属性
for (let i = 0; i < lines.length; i++) {
    const line = lines[i].trim();
    const match = line.match(/^聚合[:：]{2}\s*(.+)$/);
    if (match) {
        const contentText = match[1].trim();
        
        allNotes.push({
            content: contentText,
            lineNumber: i
        });
    }
}

// 按内容倒序排序
const sortedNotes = allNotes.sort((a, b) => 
    b.content.localeCompare(a.content)
);

// 添加紧凑样式
const style = document.createElement('style');
style.textContent = `
.note-grid {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
    gap: 8px;
    margin: 0;
}
.note-card {
    border: 1px solid #eaeaea;
    border-radius: 4px;
    padding: 8px;
    background: #fafafa;
    height: 100%;
    display: flex;
    flex-direction: column;
}
.note-content {
    flex-grow: 1;
    margin-bottom: 6px;
}
.attachments-container {
    margin-bottom: 6px;
    text-align: center;
}
.attachments-container img {
    width: 100%;
    height: 120px;
    object-fit: cover;
    border-radius: 2px;
    margin-bottom: 4px;
}
.note-text {
    font-size: 0.8em;
    line-height: 1.4;
    overflow: hidden;
    display: -webkit-box;
    -webkit-line-clamp: 2;
    -webkit-box-orient: vertical;
}
.note-footer {
    display: flex;
    justify-content: flex-end;
    font-size: 0.7em;
    color: #888;
    padding-top: 4px;
    border-top: 1px solid #eee;
}
.edit-btn {
    color: #4a86e8;
    text-decoration: none;
    opacity: 0.7;
}
`;
document.head.appendChild(style);

// 空状态处理
if (sortedNotes.length === 0) {
    dv.paragraph("未找到聚合属性");
    return;
}

// 创建笔记网格
const grid = dv.el('div', '', { cls: 'note-grid' });

// 添加笔记卡片
for (const note of sortedNotes) {
    const card = dv.el('div', '', { cls: 'note-card' });
    
    // 笔记内容容器
    const contentDiv = dv.el('div', '', { cls: 'note-content' });
    
    // 分离附件和文字
    const attachmentRegex = /(!\[\[.*?\]\])/g;
    const attachments = note.content.match(attachmentRegex) || [];
    const textContent = note.content.replace(attachmentRegex, '').trim();
    
    // 添加附件（如果有）
    if (attachments.length > 0) {
        const attachmentsContainer = dv.el('div', '', { cls: 'attachments-container' });
        attachments.forEach(attachment => {
            attachmentsContainer.appendChild(dv.span(attachment, { markdown: true }));
        });
        contentDiv.appendChild(attachmentsContainer);
    }
    
    // 添加文字内容
    if (textContent) {
        const textDiv = dv.el('div', textContent, { 
            cls: 'note-text',
            markdown: true 
        });
        contentDiv.appendChild(textDiv);
    }
    
    card.appendChild(contentDiv);
    
    // 页脚区域
    const footer = dv.el('div', '', { cls: 'note-footer' });
    
    // 编辑按钮
    const editBtn = dv.el('a', '编辑', {
        cls: 'edit-btn',
        attr: {
            href: `obsidian://advanced-uri?filepath=${encodeURIComponent(currentFile.path)}&line=${note.lineNumber}`,
            title: '跳转到此行'
        }
    });
    footer.appendChild(editBtn);
    
    card.appendChild(footer);
    grid.appendChild(card);
}

dv.container.appendChild(grid);
```